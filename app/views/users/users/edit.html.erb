<style type="text/css">

body {
    background: #F2F3F4;
}

p {
    margin-bottom: 0px;
}

.outer-margin {
    margin-top: 50px;
}


</style>

<div class="container outer-margin">
  <div class="row">
    <div class="col-md-3">
      <p>General Settings</p>
    </div>


    <div class="col-md-9">

    <div class="panel panel-default">
      <div class="panel-heading text-center"><p>Settings / <strong>General</strong></p></div>
      <div class="panel-body">
        <%# form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
        <%= form_for(@user) do |f| %>
          <%= devise_error_messages! %>

          <div class="row">
            <div class="col-md-4">
              <div class="field pull-right">
                <p><strong>Name</strong></p>
              </div>
            </div>

            <div class="col-md-8">
              <div class="field">
                 <%= f.text_field :name, autofocus: true %>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-4">
              <div class="field pull-right">
                <p><strong>Email</strong></p>
              </div>
            </div>

            <div class="col-md-8">
              <div class="field">
                <%= f.email_field :email, autofocus: true %>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-4">
              <div class="field pull-right">
                <p><strong>Username</strong></p>
              </div>
            </div>

            <div class="col-md-8">
              <div class="field">
                <%= f.text_field :username , autofocus: true %>
              </div>
            </div>
          </div>

          <div class="form-group">
            <%# f.label :investor, "Investor" %>
            <%# f.check_box :investor, autofocus: true %>
          </div>

          <div class="row">
            <div class="col-md-4">
              <div class="field pull-right">
                <p><strong>Photo</strong></p>
              </div>
            </div>

            <div class="col-md-8">
              <div class="field">
                <%= f.file_field :photo %>
                <%= image_tag(current_user.photo.url(:thumb), :width => "55px") %>
              </div>
            </div>
          </div>
          <br>

          <div class="row">
            <div class="col-md-4">
              <div class="field pull-right">
                <p><strong>Resume</strong></p>
              </div>
            </div>

            <div class="col-md-8">
              <div class="field">
                <%= f.text_area :miniresume , autofocus: true %>
              </div>
            </div>
          </div>


          <% if devise_mapping.confirmable? && resource.pending_reconfirmation? %>
            <div>Currently waiting confirmation for: <%= resource.unconfirmed_email %></div>
          <% end %>

          <hr>
          <p class="text-center">Settings / <strong>Password</strong></p>
          <br>
<!--
           <div class="row">
            <div class="col-md-4">
              <div class="field pull-right">
                <p><strong>Current Password</strong></p>
              </div>
            </div>

            <div class="col-md-8">
              <div class="field">
                <%# f.password_field :current_password, autocomplete: "off" %>
              </div>
            </div>
          </div>
-->
           <div class="row">
            <div class="col-md-4">
              <div class="field pull-right">
                <p><strong>New password</strong></p>
              </div>
            </div>

            <div class="col-md-8">
              <div class="field">
                <%= f.password_field :password, autocomplete: "off" %>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-4">
              <div class="field pull-right">
                <p><strong>Confirm new password</strong></p>
              </div>
            </div>

            <div class="col-md-8">
              <div class="field">
                <%= f.password_field :password_confirmation, autocomplete: "off" %>
              </div>
              <div class="actions">
                <%= f.submit "Save" %>
              </div>
            </div>
          </div>          
        <% end %>


        <% if current_user_subscribed? %>
          <hr>
            <p class="text-center">Settings / <strong>Update Card</strong></p>
          <br>


          <p>Your current card on file is</p>

          <div><%= current_user.card_brand %> **** **** **** <%= current_user.card_last4 %></div>
          <div>Expires <%= current_user.card_exp_month %> / <%= current_user.card_exp_year %></div>

            <%= form_tag card_path, method: :put, id: "payment-form" do %>
              <form action="/subscription" method="post" id="payment-form">
                <span class="payment-errors"></span>

                <div class="form-row">
                  <label>
                    <span>Card Number</span>
                    <input type="text" size="20" data-stripe="number">
                    
                  </label>
                </div>

                <div class="form-row">
                  <label>
                    <span>CVC</span>
                    <input value="123" type="text" size="4" data-stripe="cvc">
                  </label>
                </div>

                <div class="form-row">
                  <label>
                    <span>Expiration (MM/YYY)</span>
                    <input value="12" type="text" size="2" data-stripe="exp-month">
                  </label>
                  <span> / </span>
                  <input value="2020" type="text" size="4" data-stripe="exp-year">
                </div>

                <button type="submit">Update Card</button>
              </form>

            <% end %>

            <div class="text-center">
              <p>Cancel subscription</strong></p>
              <!-- make sure use user_path(resource_name) -->
              <p class="center"><%= button_to "Cancel subscription", subscription_path, data: { confirm: "Are you sure?" }, method: :delete %></p>

              <%# link_to "Back", :back %>
            </div>


        <% end %>

        <hr>


      </div>
    </div>


      

    </div>
  </div>
</div>
